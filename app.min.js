(function(){const _0x4f9c=['value','trim','getElementById','length','lat','lon','json','parseFloat','innerHTML','Adresse introuvable. Merci de vérifier.','fetch','disabled','Hauteur > 1 mètre : veuillez nous contacter par email à contact@jmageo.com','37 Rue du Millet, 77240 VERT-SAINT-DENIS, France'];(function(_0x1c6f0f,_0x4f9c78){while(--_0x4f9c78){_0x1c6f0f.push(_0x1c6f0f.shift());}})(_0x4f9c,0x12f);const _0x1c6f=function(_0x4d7c5e){return _0x4f9c[_0x4d7c5e];};const _addr=_0x1c6f(13);function _rad(_d){return _d*Math.PI/180;}function _dist(_a,_b,_c,_d){const R=6371,dLat=_rad(_c-_a),dLon=_rad(_d-_b),x=Math.sin(dLat/2)**2+Math.cos(_rad(_a))*Math.cos(_rad(_c))*Math.sin(dLon/2)**2;return R*2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));}async function _coords(q){const u='https://nominatim.openstreetmap.org/search?format=json&q='+encodeURIComponent(q),r=await fetch(u,{headers:{'User-Agent':'JMAGEO-App'}}),j=await r[_0x1c6f(6)]();if(j[_0x1c6f(3)]>0)return{lat:parseFloat(j[0][_0x1c6f(4)]),lon:parseFloat(j[0][_0x1c6f(5)])};alert(_0x1c6f(9));return null;}document[_0x1c6f(2)]('hauteur').addEventListener('change',function(){const b=document[_0x1c6f(2)]('btnEstimer'),r=document[_0x1c6f(2)]('result');this[_0x1c6f(0)]==='oui'?(b[_0x1c6f(11)]=false,r[_0x1c6f(8)]=''):this[_0x1c6f(0)]==='non'?(b[_0x1c6f(11)]=true,r[_0x1c6f(8)]='<div class="warning">'+_0x1c6f(12)+'</div>'):(b[_0x1c6f(11)]=true,r[_0x1c6f(8)]='');});window.calculerPrix=async function(){const a=document[_0x1c6f(2)]('adresse')[_0x1c6f(0)][_0x1c6f(1)](),n=parseInt(document[_0x1c6f(2)]('n')[_0x1c6f(0)]);if(!a||!n){alert('Veuillez remplir tous les champs.');return;}const c1=await _coords(_addr),c2=await _coords(a);if(!c1||!c2)return;const km=_dist(c1.lat,c1.lon,c2.lat,c2.lon)*1.3;let p=300+3*km+(n<100?12*n:11*n);document[_0x1c6f(2)]('result')[_0x1c6f(8)]='Distance estimée : '+km.toFixed(2)+' km<br>Prix estimatif : '+p.toFixed(2)+' €';};})();
